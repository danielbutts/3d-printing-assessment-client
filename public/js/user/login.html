<navbar></navbar>
<main class="container">
  <div class="row">
    <div id="message" class="col-xs-offset-2 col-xs-8 message"></div>
  </div>
  <form id="loginForm" method="post" action="#" class="col offset-s2 s8">
    <div class="row">
      <div class="col-xs-offset-2 col-xs-8">
        Sign In:<br><br>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-offset-2 col-xs-8">
        <input placeholder="Name" name="name" id="name" type="text">
        <label for="name">Name</label><br><br>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-offset-2 col-xs-8">
        <input placeholder="Password" name="password"  id="password" type="password">
        <label for="password">Password</label><br><br>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-offset-2 col-xs-8">
      <button type="submit">Submit</button>
    </div>
  </form>
</main>
<script>
$('#loginForm').submit((event) => {
  event.preventDefault();
  console.log("IM HERERERERE!");
  $('#message').empty();

  const name = $('#name').val().trim();
  const password = $('#password').val();

  const options = {
    contentType: 'application/json',
    data: JSON.stringify({ name, password }),
    dataType: 'json',
    type: 'POST',
    url: '/api/login'
  };

  $.ajax(options)
    .then(() => {
      console.log("Auth Succeeded");
      // window.location.href = '/';
    })
    .catch(($xhr) => {
      console.log("Auth Failed");
      $('#message').append("Auth Failed");
    });
});
</script>